#include "ja.h"

// 関数定義
整数関数定義 足し算(整数 a, 整数 b) {
    返す a + b;
}

整数関数定義 main() {
    // 画面出力
    表示("こんにちは、世界！\n");

    // 文字列
    文字 str[] = "テスト文字列";
    表示("文字列長さ: %d\n", 文字列長さ(str));

    // メモリ確保・解放
    整数 *arr = (整数*)メモリ確保(5 * sizeof(整数));
    arr[0] = 10;
    表示("arr[0]=%d\n", arr[0]);
    メモリ解放(arr);

    // 数値計算
    浮動小数 x = 9.0;
    表示("平方根: %f\n", 平方根(x));
    表示("2の3乗: %f\n", 累乗(2, 3));

    // 乱数
    乱数初期化(時間取得(0));
    表示("乱数: %d\n", 乱数());

    // 文字種判定
    文字 c = 'A';
    表示("'A'は英字か: %d\n", 英字か(c));

    // 時刻取得
    長整数 now = 現在時刻(0);
    表示("現在時刻(エポック秒): %ld\n", now);

    // 絶対値
    整数 a = -42;
    表示("絶対値: %d\n", 絶対値(a));

    // 最大値・最小値
    整数 b = 100, c = 50;
    表示("最大値: %d\n", 最大値(b, c));
    表示("最小値: %d\n", 最小値(b, c));

    // 文字→数値変換
    文字 numstr[] = "1234";
    整数 n = 文字列を整数(numstr);
    表示("文字列'%s'→整数: %d\n", numstr, n);

    // 数値→文字列変換
    文字 buf[32];
    整数を文字列(buf, 5678);
    表示("整数5678→文字列: %s\n", buf);

    // 文字列コピー・連結
    文字 s1[32] = "abc";
    文字 s2[] = "def";
    文字列連結(s1, s2);
    表示("連結結果: %s\n", s1);

    // 文字列比較
    表示("文字列比較('abc','abc'): %d\n", 文字列比較("abc", "abc"));
    表示("文字列比較('abc','def'): %d\n", 文字列比較("abc", "def"));

    // 文字種判定（数字か）
    文字 d = '9';
    表示("'9'は数字か: %d\n", 数字か(d));

    // メモリコピー
    文字 src[] = "コピー元";
    文字 dst[32];
    メモリコピー(dst, src, 文字列長さ(src) + 1);
    表示("メモリコピー結果: %s\n", dst);

    // 文字列検索
    文字 haystack[] = "abcdefg";
    文字 needle[] = "cde";
    文字 *found = 文字列検索(haystack, needle);
    表示("文字列検索('abcdefg','cde'): %s\n", found);

    // 文字変換（大文字・小文字）
    文字 upper = 小文字を大文字('z');
    文字 lower = 大文字を小文字('Z');
    表示("'z'→大文字: %c, 'Z'→小文字: %c\n", upper, lower);

    // 符号反転
    整数 sign = 123;
    表示("符号反転: %d\n", 符号反転(sign));

    // ビット演算
    整数 x = 0b1010, y = 0b1100;
    表示("ビットAND: %d\n", ビットAND(x, y));
    表示("ビットOR: %d\n", ビットOR(x, y));
    表示("ビットXOR: %d\n", ビットXOR(x, y));
    表示("ビットNOT: %d\n", ビットNOT(x));

    // メモリ比較
    文字 mem1[] = "abc";
    文字 mem2[] = "abd";
    表示("メモリ比較('abc','abd',2): %d\n", メモリ比較(mem1, mem2, 2));
    表示("メモリ比較('abc','abd',3): %d\n", メモリ比較(mem1, mem2, 3));

    // 文字列部分コピー
    文字 src2[] = "部分コピー";
    文字 dst2[16];
    文字列部分コピー(dst2, src2, 2);
    dst2[2] = '\0';
    表示("文字列部分コピー(2文字): %s\n", dst2);

    // 文字列部分検索
    文字 hay2[] = "abcdefg";
    文字 need2[] = "de";
    文字 *found2 = 文字列部分検索(hay2, need2, 5);
    表示("文字列部分検索('abcdefg','de',5): %s\n", found2);

    // ゼロ埋め
    文字 zero[8];
    ゼロ埋め(zero, sizeof(zero));
    表示("ゼロ埋め結果: %d %d %d\n", zero[0], zero[1], zero[2]);

    // ビットシフト
    整数 bs = 1;
    表示("左シフト(1<<3): %d\n", 左シフト(bs, 3));
    表示("右シフト(8>>2): %d\n", 右シフト(8, 2));

    // 符号判定
    整数 pos = 5, neg = -5;
    表示("正か: %d, 負か: %d\n", 正か(pos), 負か(neg));

    // 符号付き→符号なし変換、符号なし→符号付き変換
    整数 negval = -123;
    符号なし整数 uval = 符号付きを符号なし(negval);
    表示("符号付き-123→符号なし: %u\n", uval);
    整数 sval = 符号なしを符号付き(uval);
    表示("符号なし→符号付き: %d\n", sval);

    // 配列反転
    整数 arr2[] = {1, 2, 3, 4, 5};
    配列反転(arr2, 5);
    表示("配列反転: %d %d %d %d %d\n", arr2[0], arr2[1], arr2[2], arr2[3], arr2[4]);

    // 配列合計
    整数 arr3[] = {10, 20, 30};
    表示("配列合計: %d\n", 配列合計(arr3, 3));

    // 配列最大値・最小値
    整数 arr4[] = {7, 2, 9, 4};
    表示("配列最大値: %d\n", 配列最大値(arr4, 4));
    表示("配列最小値: %d\n", 配列最小値(arr4, 4));

    // 浮動小数点比較
    浮動小数 f1 = 1.23, f2 = 1.23001;
    表示("浮動小数点比較(1.23,1.23001,0.001): %d\n", 浮動小数点等しいか(f1, f2, 0.001));

    // 配列検索
    整数 arr5[] = {3, 8, 5, 7};
    整数 idx = 配列検索(arr5, 4, 5);
    表示("配列検索(5): %d\n", idx);

    // 配列カウント
    整数 arr6[] = {1, 2, 2, 3, 2};
    整数 cnt = 配列カウント(arr6, 5, 2);
    表示("配列カウント(2): %d\n", cnt);

    // 配列コピー
    整数 arr7_src[] = {9, 8, 7};
    整数 arr7_dst[3];
    配列コピー(arr7_dst, arr7_src, 3);
    表示("配列コピー: %d %d %d\n", arr7_dst[0], arr7_dst[1], arr7_dst[2]);

    // 配列比較
    整数 arr8a[] = {1, 2, 3};
    整数 arr8b[] = {1, 2, 3};
    整数 arr8c[] = {1, 2, 4};
    表示("配列比較(a,b): %d\n", 配列比較(arr8a, arr8b, 3));
    表示("配列比較(a,c): %d\n", 配列比較(arr8a, arr8c, 3));

    // 浮動小数点絶対値
    浮動小数 f3 = -3.14;
    表示("浮動小数点絶対値: %f\n", 浮動小数点絶対値(f3));

    // 浮動小数点最大・最小
    浮動小数 f4 = 2.71, f5 = 3.14;
    表示("浮動小数点最大: %f\n", 浮動小数点最大(f4, f5));
    表示("浮動小数点最小: %f\n", 浮動小数点最小(f4, f5));

    // 浮動小数点累乗
    表示("浮動小数点累乗(2.0, 4.0): %f\n", 浮動小数点累乗(2.0, 4.0));

    // 配列の平均
    整数 arr9[] = {2, 4, 6, 8};
    表示("配列平均: %f\n", 配列平均(arr9, 4));

    // 配列の中央値
    整数 arr10[] = {5, 2, 8, 1, 7};
    表示("配列中央値: %f\n", 配列中央値(arr10, 5));

    // 配列の標準偏差
    整数 arr11[] = {1, 2, 3, 4, 5};
    表示("配列標準偏差: %f\n", 配列標準偏差(arr11, 5));

    // 配列のソート
    整数 arr12[] = {4, 1, 3, 2};
    配列ソート(arr12, 4);
    表示("配列ソート: %d %d %d %d\n", arr12[0], arr12[1], arr12[2], arr12[3]);

    // 浮動小数点配列合計・最大・最小
    浮動小数 farr[] = {1.1, 2.2, 0.9, 3.3};
    表示("浮動小数点配列合計: %f\n", 浮動小数点配列合計(farr, 4));
    表示("浮動小数点配列最大: %f\n", 浮動小数点配列最大(farr, 4));
    表示("浮動小数点配列最小: %f\n", 浮動小数点配列最小(farr, 4));

    // 文字種判定（空白か）
    文字 ws = ' ';
    表示("' 'は空白か: %d\n", 空白か(ws));

    // 文字種判定（制御文字か）
    文字 ctrl = '\n';
    表示("'\\n'は制御文字か: %d\n", 制御文字か(ctrl));

    // 文字種判定（記号か）
    文字 sym = '#';
    表示("'#'は記号か: %d\n", 記号か(sym));

    // 文字種判定（16進数字か）
    文字 hex1 = 'F', hex2 = 'g';
    表示("'F'は16進数字か: %d\n", 十六進数字か(hex1));
    表示("'g'は16進数字か: %d\n", 十六進数字か(hex2));

    // 文字種判定（英大文字か・英小文字か）
    文字 up = 'Q', low = 'q';
    表示("'Q'は英大文字か: %d\n", 英大文字か(up));
    表示("'q'は英小文字か: %d\n", 英小文字か(low));

    // 文字の大文字/小文字変換
    表示("'a'→大文字: %c\n", 小文字を大文字('a'));
    表示("'A'→小文字: %c\n", 大文字を小文字('A'));

    表示("%d", 足し算(5, 3));

    返す 0;
}

